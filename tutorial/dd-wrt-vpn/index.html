<!doctype html>
<html lang="en">
<head>
    <meta name="generator" content="wlanboy" />
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="wlanboy wlanboy.com tutorials and ruby scripts">
    <title>wlanboy - tutorials and ruby scripts - dd-wrt-vpn</title>

    <link rel="stylesheet" href="/css/pure-min.css">
    <link rel="stylesheet" href="/css/grids-responsive-min.css">
    <link rel="stylesheet" href="/css/font-awesome.css">
    <link rel="stylesheet" href="/css/layouts/wlanboy.css">
</head>
<body>

<div class="header" id="header">
    <div class="home-menu pure-menu pure-menu-horizontal pure-menu-fixed">
        <ul class="pure-menu-list">
            <li class="pure-menu-item"><a href="/#" class="pure-menu-link">Home</a></li>
            <li class="pure-menu-item pure-menu-selected"><a href="/#Tutorials" class="pure-menu-link">Tutorials</a></li>
            <li class="pure-menu-item"><a href="/#Gists" class="pure-menu-link">Gists</a></li>
            <li class="pure-menu-item"><a href="/#System" class="pure-menu-link">System</a></li>
            <li class="pure-menu-item"><a href="/#About" class="pure-menu-link">About</a></li>
        </ul>
    </div>
</div>

<div class="splash-container">
    <div class="splash">
        <h1 class="splash-head">wlanboy</h1>
        <p class="splash-subhead">
            tutorials and ruby scripts
        </p>
        <p>
            <a href="/#Tutorials" class="pure-button pure-button-primary">Read my tutorials</a>
        </p>
        <p>
            <a href="/#Gists" class="pure-button pure-button-primary">Read my gists</a>
        </p>
    </div>
</div>
<div class="content-wrapper" id="Tutorial">
    <div class="content">
    <h2 class="content-head is-center" >Tutorial</h2>
        <div class="pure-g">
            <div class="l-box-lrg pure-u-1">
            <h2 id="tutorial-dd-wrt-vpn">Tutorial: dd-wrt-vpn</h2>
<p>I do have some devices where I am not able to install an OpenVPN client. But I want to use an US IP for these devices. You might think that the only way to get an US IP is to root/patch the devices.</p>
<p>The more elegant way is to have a device that is doing the OpenVPN client job.</p>
<p>Therefore I bought a cheap second router (30$) and installed dd-wrt on it.</p>
<p>If you log into the web interface you can go to the section:</p>
<p>Services -&gt; VPN -&gt; OpenVPN Client</p>
<p>Enter Server IP, Port, Tunnel Protocol (UDP), Tunnel Device (TUN), Encryption Cipher (Blowfish CBC), Hash Algorithm (SHA1), Use LZO Compression (enabled) and NAT (enabled).</p>
<p>Afterwards you can enter (copy/paste):</p>
<ul>
<li>CA Cert</li>
<li>Public Client Cert</li>
<li>Private Client Key</li>
</ul>
<p>On some routers you have to add following command to enable masquerading:</p>
<p>Go to Administration -&gt; Commands</p>
<p>enter:</p>
<pre class="prettyprint">iptables -t nat -A POSTROUTING -j MASQUERADE
</pre>
<p>and press the &ldquo;Save firewall&rdquo; button.</p>
<p>That&rsquo;s it. Restart the second router.</p>
<p>Now all internet traffic of this router is forwarded through the OpenVPN tunnel.</p>
<p>Every devices connected to this router (LAN or WLAN) does not even know that it is using an OpenVPN tunnel. It is just using on US IP (depends on the localtion of your vps).</p>
<p>I plugged my second router right into the network of my first router.</p>
<p>This can be done through setting the connection type to &ldquo;Automatic configuration - DHCP&rdquo; on the submenu: Setup -&gt; Basic Setup. This ensures that the second router is using the internet connection of the first router to establish his own OpenVPN connection.</p>

            </div>
        </div>
    </div>

    <div class="footer l-box is-center">
        <p class="footer">
            wlanboy.com | Proudly powered by Ruby | Github
        </p>
    </div>
</div>

</body></html>